function Ut(){}function We(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}function ze(r,...t){if(r==null)return Ut;const e=r.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Ot(r){let t;return ze(r,e=>t=e)(),t}Promise.resolve();const ot=[];function Se(r,t){return{subscribe:Ae(r,t).subscribe}}function Ae(r,t=Ut){let e;const i=new Set;function s(c){if(We(r,c)&&(r=c,e)){const l=!ot.length;for(const o of i)o[1](),ot.push(o,r);if(l){for(let o=0;o<ot.length;o+=2)ot[o][0](ot[o+1]);ot.length=0}}}function n(c){s(c(r))}function a(c,l=Ut){const o=[c,l];return i.add(o),i.size===1&&(e=t(s)||Ut),c(r),()=>{i.delete(o),i.size===0&&(e(),e=null)}}return{set:s,update:n,subscribe:a}}const Ee=Ae(void 0),Xt=Se(void 0,r=>{Ee.subscribe(t=>{r(t)})}),Qr=(r,t)=>{const e=Ot(Xt);return Se(void 0,i=>{i(e.getResourceLoading(r,t));const s=n=>{i(n)};return e.subscribe(r,s),()=>e.unsubscribe(r,s)})},tn=(r,t,e=!1)=>{const i=Ot(Xt);let s=Ot(r);r.subscribe(f=>s=f);let n=s.get(t);const a=new Set;let c=!1;const l=f=>{n=f.get(t),o()},o=()=>{for(const f of a)f(n)},u=async f=>{n=f,f===void 0?s.removePropVal(t):s.set(t,f,i,!1),e&&await s.save(i),await i.notify(s)};return{set(f){u(f),o()},subscribe(f){return c||(i.subscribe(s.getSubject(),l),c=!0),a.add(f),f(n),()=>{a.delete(f),a.size===0&&(i.unsubscribe(s.getSubject(),l),c=!1)}},update(f){u(f(n)).then(()=>{o()})}}},Ge=r=>typeof r=="string"?[r]:Array.isArray(r)?r:[],en=async(r,t)=>{const e=Ot(Xt),i=async(n,a)=>{const c=[];for(const[l,o]of Object.entries(a)){await e.getResourceAsync(l);const u=Ge(n.get(l)),f=await Promise.all(u.map(p=>e.getResourceAsync(p)));if(typeof o!="boolean")for(const p of f)c.push(i(p,o))}return Promise.allSettled(c.flat())},s=await e.getResourceAsync(r);await i(s,t)},rn=r=>{Ee.set(r)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var Qt=globalThis&&globalThis.__awaiter||function(r,t,e,i){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function c(u){try{o(i.next(u))}catch(f){a(f)}}function l(u){try{o(i.throw(u))}catch(f){a(f)}}function o(u){u.done?n(u.value):s(u.value).then(c,l)}o((i=i.apply(r,t||[])).next())})},te=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=o[0]&2?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,s=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(r,e)}catch(u){o=[6,u],s=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};function _e(r,t){return Qt(this,void 0,void 0,function(){var e,i,s,n,a;return te(this,function(c){switch(c.label){case 0:if(e=oe(),!t.subject)throw new Error("Agent has no subject, cannot authenticate");return a={"https://atomicdata.dev/properties/auth/agent":t.subject,"https://atomicdata.dev/properties/auth/requestedSubject":r},s="https://atomicdata.dev/properties/auth/publicKey",[4,t.getPublicKey()];case 1:return a[s]=c.sent(),a["https://atomicdata.dev/properties/auth/timestamp"]=e,n="https://atomicdata.dev/properties/auth/signature",[4,Re(r,t,e)];case 2:return i=(a[n]=c.sent(),a),[2,i]}})})}function Re(r,t,e){return Qt(this,void 0,void 0,function(){var i;return te(this,function(s){switch(s.label){case 0:return i="".concat(r," ").concat(e),[4,je(i,t.privateKey)];case 1:return[2,s.sent()]}})})}function qe(r,t){var e;return!r.startsWith("http://localhost")&&((e=t==null?void 0:t.subject)===null||e===void 0?void 0:e.startsWith("http://localhost"))}function Ve(r,t,e){return Qt(this,void 0,void 0,function(){var i,s,n,a,c;return te(this,function(l){switch(l.label){case 0:return i=oe(),t!=null&&t.subject&&!qe(r,t)?(s=e,n="x-atomic-public-key",[4,t.getPublicKey()]):[3,3];case 1:return s[n]=l.sent(),a=e,c="x-atomic-signature",[4,Re(r,t,i)];case 2:a[c]=l.sent(),e["x-atomic-timestamp"]=i,e["x-atomic-agent"]=t==null?void 0:t.subject,l.label=3;case 3:return[2,e]}})})}var Ze=24*60*60*1e3,$e=function(r,t,e,i){i===void 0&&(i=Ze);var s=new Date(Date.now()+i).toUTCString(),n=encodeURIComponent(t),a=new URL(e.getServerUrl()).hostname,c="".concat(r,"=").concat(n,";Expires=").concat(s,";Domain=").concat(a,";SameSite=Lax;path=/");document.cookie=c},Te=function(r,t){_e(r.getServerUrl(),t).then(function(e){$e("atomic_session",btoa(JSON.stringify(e)),r)})},Je=function(){var r=document.cookie.match(/^(.*;)?\s*atomic_session\s*=\s*[^;]+(.*)?$/);return r?r.length>0:!1};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ye(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var kt={},Xe={get exports(){return kt},set exports(r){kt=r}};(function(r,t){var e=typeof self<"u"?self:Ke,i=function(){function n(){this.fetch=!1,this.DOMException=e.DOMException}return n.prototype=e,new n}();(function(n){(function(a){var c={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function l(h){return h&&DataView.prototype.isPrototypeOf(h)}if(c.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(h){return h&&o.indexOf(Object.prototype.toString.call(h))>-1};function f(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function p(h){return typeof h!="string"&&(h=String(h)),h}function m(h){var y={next:function(){var g=h.shift();return{done:g===void 0,value:g}}};return c.iterable&&(y[Symbol.iterator]=function(){return y}),y}function b(h){this.map={},h instanceof b?h.forEach(function(y,g){this.append(g,y)},this):Array.isArray(h)?h.forEach(function(y){this.append(y[0],y[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(y){this.append(y,h[y])},this)}b.prototype.append=function(h,y){h=f(h),y=p(y);var g=this.map[h];this.map[h]=g?g+", "+y:y},b.prototype.delete=function(h){delete this.map[f(h)]},b.prototype.get=function(h){return h=f(h),this.has(h)?this.map[h]:null},b.prototype.has=function(h){return this.map.hasOwnProperty(f(h))},b.prototype.set=function(h,y){this.map[f(h)]=p(y)},b.prototype.forEach=function(h,y){for(var g in this.map)this.map.hasOwnProperty(g)&&h.call(y,this.map[g],g,this)},b.prototype.keys=function(){var h=[];return this.forEach(function(y,g){h.push(g)}),m(h)},b.prototype.values=function(){var h=[];return this.forEach(function(y){h.push(y)}),m(h)},b.prototype.entries=function(){var h=[];return this.forEach(function(y,g){h.push([g,y])}),m(h)},c.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function v(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function S(h){return new Promise(function(y,g){h.onload=function(){y(h.result)},h.onerror=function(){g(h.error)}})}function C(h){var y=new FileReader,g=S(y);return y.readAsArrayBuffer(h),g}function D(h){var y=new FileReader,g=S(y);return y.readAsText(h),g}function A(h){for(var y=new Uint8Array(h),g=new Array(y.length),I=0;I<y.length;I++)g[I]=String.fromCharCode(y[I]);return g.join("")}function L(h){if(h.slice)return h.slice(0);var y=new Uint8Array(h.byteLength);return y.set(new Uint8Array(h)),y.buffer}function M(){return this.bodyUsed=!1,this._initBody=function(h){this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:c.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:c.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():c.arrayBuffer&&c.blob&&l(h)?(this._bodyArrayBuffer=L(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||u(h))?this._bodyArrayBuffer=L(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var h=v(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var h=v(this);if(h)return h;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var ht=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function dt(h){var y=h.toUpperCase();return ht.indexOf(y)>-1?y:h}function O(h,y){y=y||{};var g=y.body;if(h instanceof O){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,y.headers||(this.headers=new b(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!g&&h._bodyInit!=null&&(g=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=y.credentials||this.credentials||"same-origin",(y.headers||!this.headers)&&(this.headers=new b(y.headers)),this.method=dt(y.method||this.method||"GET"),this.mode=y.mode||this.mode||null,this.signal=y.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&g)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(g)}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function F(h){var y=new FormData;return h.trim().split("&").forEach(function(g){if(g){var I=g.split("="),k=I.shift().replace(/\+/g," "),_=I.join("=").replace(/\+/g," ");y.append(decodeURIComponent(k),decodeURIComponent(_))}}),y}function it(h){var y=new b,g=h.replace(/\r?\n[\t ]+/g," ");return g.split(/\r?\n/).forEach(function(I){var k=I.split(":"),_=k.shift().trim();if(_){var At=k.join(":").trim();y.append(_,At)}}),y}M.call(O.prototype);function P(h,y){y||(y={}),this.type="default",this.status=y.status===void 0?200:y.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in y?y.statusText:"OK",this.headers=new b(y.headers),this.url=y.url||"",this._initBody(h)}M.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},P.error=function(){var h=new P(null,{status:0,statusText:""});return h.type="error",h};var st=[301,302,303,307,308];P.redirect=function(h,y){if(st.indexOf(y)===-1)throw new RangeError("Invalid status code");return new P(null,{status:y,headers:{location:h}})},a.DOMException=n.DOMException;try{new a.DOMException}catch{a.DOMException=function(y,g){this.message=y,this.name=g;var I=Error(y);this.stack=I.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function Q(h,y){return new Promise(function(g,I){var k=new O(h,y);if(k.signal&&k.signal.aborted)return I(new a.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function At(){_.abort()}_.onload=function(){var pt={status:_.status,statusText:_.statusText,headers:it(_.getAllResponseHeaders()||"")};pt.url="responseURL"in _?_.responseURL:pt.headers.get("X-Request-URL");var jt="response"in _?_.response:_.responseText;g(new P(jt,pt))},_.onerror=function(){I(new TypeError("Network request failed"))},_.ontimeout=function(){I(new TypeError("Network request failed"))},_.onabort=function(){I(new a.DOMException("Aborted","AbortError"))},_.open(k.method,k.url,!0),k.credentials==="include"?_.withCredentials=!0:k.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&c.blob&&(_.responseType="blob"),k.headers.forEach(function(pt,jt){_.setRequestHeader(jt,pt)}),k.signal&&(k.signal.addEventListener("abort",At),_.onreadystatechange=function(){_.readyState===4&&k.signal.removeEventListener("abort",At)}),_.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return Q.polyfill=!0,n.fetch||(n.fetch=Q,n.Headers=b,n.Request=O,n.Response=P),a.Headers=b,a.Request=O,a.Response=P,a.fetch=Q,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,r.exports=t})(Xe,kt);const Vt=Ye(kt);var Zt=globalThis&&globalThis.__assign||function(){return Zt=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Zt.apply(this,arguments)},Be=globalThis&&globalThis.__awaiter||function(r,t,e,i){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function c(u){try{o(i.next(u))}catch(f){a(f)}}function l(u){try{o(i.throw(u))}catch(f){a(f)}}function o(u){u.done?n(u.value):s(u.value).then(c,l)}o((i=i.apply(r,t||[])).next())})},Ue=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=o[0]&2?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,s=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(r,e)}catch(u){o=[6,u],s=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};globalThis&&globalThis.__values;var Qe="application/ad+json";function $t(r,t,e){return Be(this,void 0,void 0,function(){var i,s,n,a,c,l,o,u,f;return Ue(this,function(p){switch(p.label){case 0:i=new rt(r),p.label=1;case 1:return p.trys.push([1,7,,8]),lt(r),s={},s.Accept=Qe,n=t==null?void 0:t.getAgent(),n&&t?r.startsWith(window.location.origin)?(Je()||Te(t,n),[3,4]):[3,2]:[3,4];case 2:return[4,Ve(r,n,s)];case 3:p.sent(),p.label=4;case 4:if(a=r,e!==void 0&&(c=new URL("".concat(e,"/path")),c.searchParams.set("path",r),a=c.href),Vt===void 0)throw new G("No window object available this lib currently requires the DOM for fetching");return[4,Vt(a,{headers:s})];case 5:return l=p.sent(),[4,l.text()];case 6:if(o=p.sent(),l.status===200)try{u=JSON.parse(o),i=ce(u,i,t)}catch(m){throw new G("Could not parse JSON from fetching ".concat(r,". Is it an Atomic Data resource? Error message: ").concat(m.message))}else throw l.status===401?new G(o,W.Unauthorized):l.status===500?new G(o,W.Server):l.status===404?new G(o,W.NotFound):new G(o);return[3,8];case 7:return f=p.sent(),i.setError(f),[3,8];case 8:return i.loading=!1,t&&t.addResource(i),[2,i]}})})}function ue(r,t){return Be(this,void 0,void 0,function(){var e,i,s,n,a;return Ue(this,function(c){switch(c.label){case 0:e=Pe(Zt({},r)),i=new Headers,i.set("Content-Type","application/ad+json"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Vt(t,{headers:i,method:"POST",body:e})];case 2:return s=c.sent(),[3,4];case 3:throw n=c.sent(),new G("Posting Commit to ".concat(t," failed: ").concat(n));case 4:return[4,s.text()];case 5:if(a=c.sent(),s.status!==200)throw new G(a,W.Server);return[2,De(a)]}})})}function lt(r){try{new URL(r)}catch(t){throw new Error("Not a valid URL: ".concat(r,". ").concat(t))}}function tr(r){return r==null?void 0:r.split("?")[0]}const er={};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const U=BigInt(0),x=BigInt(1),N=BigInt(2),Oe=BigInt(255),le=N**BigInt(252)+BigInt("27742317777372353535851937790883648493"),R={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:N**Oe-BigInt(19),l:le,n:le,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},ke=N**BigInt(256),mt=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const rr=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),nr=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ir=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),sr=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class E{constructor(t,e,i,s){this.x=t,this.y=e,this.z=i,this.t=s}static fromAffine(t){if(!(t instanceof B))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(B.ZERO)?E.ZERO:new E(t.x,t.y,x,d(t.x*t.y))}static toAffineBatch(t){const e=cr(t.map(i=>i.z));return t.map((i,s)=>i.toAffine(e[s]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){fe(t);const{x:e,y:i,z:s}=this,{x:n,y:a,z:c}=t,l=d(e*c),o=d(n*s),u=d(i*c),f=d(a*s);return l===o&&u===f}negate(){return new E(d(-this.x),this.y,this.z,d(-this.t))}double(){const{x:t,y:e,z:i}=this,{a:s}=R,n=d(t**N),a=d(e**N),c=d(N*d(i**N)),l=d(s*n),o=d(d((t+e)**N)-n-a),u=l+a,f=u-c,p=l-a,m=d(o*f),b=d(u*p),v=d(o*p),S=d(f*u);return new E(m,b,S,v)}add(t){fe(t);const{x:e,y:i,z:s,t:n}=this,{x:a,y:c,z:l,t:o}=t,u=d((i-e)*(c+a)),f=d((i+e)*(c-a)),p=d(f-u);if(p===U)return this.double();const m=d(s*N*o),b=d(n*N*l),v=b+m,S=f+u,C=b-m,D=d(v*p),A=d(S*C),L=d(v*C),M=d(p*S);return new E(D,A,M,L)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,i=[];let s=this,n=s;for(let a=0;a<e;a++){n=s,i.push(n);for(let c=1;c<2**(t-1);c++)n=n.add(s),i.push(n);s=n.double()}return i}wNAF(t,e){!e&&this.equals(E.BASE)&&(e=B.BASE);const i=e&&e._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=e&&Jt.get(e);s||(s=this.precomputeWindow(i),e&&i!==1&&(s=E.normalizeZ(s),Jt.set(e,s)));let n=E.ZERO,a=E.ZERO;const c=1+256/i,l=2**(i-1),o=BigInt(2**i-1),u=2**i,f=BigInt(i);for(let p=0;p<c;p++){const m=p*l;let b=Number(t&o);if(t>>=f,b>l&&(b-=u,t+=x),b===0){let v=s[m];p%2&&(v=v.negate()),a=a.add(v)}else{let v=s[m+Math.abs(b)-1];b<0&&(v=v.negate()),n=n.add(v)}}return E.normalizeZ([n,a])[0]}multiply(t,e){return this.wNAF(Ct(t,R.l),e)}multiplyUnsafe(t){let e=Ct(t,R.l,!1);const i=E.BASE,s=E.ZERO;if(e===U)return s;if(this.equals(s)||e===x)return this;if(this.equals(i))return this.wNAF(e);let n=s,a=this;for(;e>U;)e&x&&(n=n.add(a)),a=a.double(),e>>=x;return n}isSmallOrder(){return this.multiplyUnsafe(R.h).equals(E.ZERO)}isTorsionFree(){return this.multiplyUnsafe(R.l).equals(E.ZERO)}toAffine(t=Nt(this.z)){const{x:e,y:i,z:s}=this,n=d(e*t),a=d(i*t);if(d(s*t)!==x)throw new Error("invZ was invalid");return new B(n,a)}fromRistrettoBytes(){Lt()}toRistrettoBytes(){Lt()}fromRistrettoHash(){Lt()}}E.BASE=new E(R.Gx,R.Gy,x,d(R.Gx*R.Gy));E.ZERO=new E(U,x,x,U);function fe(r){if(!(r instanceof E))throw new TypeError("ExtendedPoint expected")}function Dt(r){if(!(r instanceof H))throw new TypeError("RistrettoPoint expected")}function Lt(){throw new Error("Legacy method: switch to RistrettoPoint")}class H{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=R,i=d(mt*t*t),s=d((i+x)*ir);let n=BigInt(-1);const a=d((n-e*i)*d(i+e));let{isValid:c,value:l}=re(s,a),o=d(l*t);X(o)||(o=d(-o)),c||(l=o),c||(n=i);const u=d(n*(i-x)*sr-a),f=l*l,p=d((l+l)*a),m=d(u*rr),b=d(x-f),v=d(x+f);return new E(d(p*v),d(b*m),d(m*v),d(p*b))}static hashToCurve(t){t=nt(t,64);const e=Mt(t.slice(0,32)),i=this.calcElligatorRistrettoMap(e),s=Mt(t.slice(32,64)),n=this.calcElligatorRistrettoMap(s);return new H(i.add(n))}static fromHex(t){t=nt(t,32);const{a:e,d:i}=R,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",n=Mt(t);if(!lr(xt(n),t)||X(n))throw new Error(s);const a=d(n*n),c=d(x+e*a),l=d(x-e*a),o=d(c*c),u=d(l*l),f=d(e*i*o-u),{isValid:p,value:m}=he(d(f*u)),b=d(m*l),v=d(m*b*f);let S=d((n+n)*b);X(S)&&(S=d(-S));const C=d(c*v),D=d(S*C);if(!p||X(D)||C===U)throw new Error(s);return new H(new E(S,C,x,D))}toRawBytes(){let{x:t,y:e,z:i,t:s}=this.ep;const n=d(d(i+e)*d(i-e)),a=d(t*e),{value:c}=he(d(n*a**N)),l=d(c*n),o=d(c*a),u=d(l*o*s);let f;if(X(s*u)){let m=d(e*mt),b=d(t*mt);t=m,e=b,f=d(l*nr)}else f=o;X(t*u)&&(e=d(-e));let p=d((i-e)*f);return X(p)&&(p=d(-p)),xt(p)}toHex(){return St(this.toRawBytes())}toString(){return this.toHex()}equals(t){Dt(t);const e=this.ep,i=t.ep,s=d(e.x*i.y)===d(e.y*i.x),n=d(e.y*i.y)===d(e.x*i.x);return s||n}add(t){return Dt(t),new H(this.ep.add(t.ep))}subtract(t){return Dt(t),new H(this.ep.subtract(t.ep))}multiply(t){return new H(this.ep.multiply(t))}multiplyUnsafe(t){return new H(this.ep.multiplyUnsafe(t))}}H.BASE=new H(E.BASE);H.ZERO=new H(E.ZERO);const Jt=new WeakMap;class B{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Jt.delete(this)}static fromHex(t,e=!0){const{d:i,P:s}=R;t=nt(t,32);const n=t.slice();n[31]=t[31]&-129;const a=ft(n);if(e&&a>=s)throw new Error("Expected 0 < hex < P");if(!e&&a>=ke)throw new Error("Expected 0 < hex < 2**256");const c=d(a*a),l=d(c-x),o=d(i*c+x);let{isValid:u,value:f}=re(l,o);if(!u)throw new Error("Point.fromHex: invalid y coordinate");const p=(f&x)===x;return(t[31]&128)!==0!==p&&(f=d(-f)),new B(f,a)}static async fromPrivateKey(t){return(await ne(t)).point}toRawBytes(){const t=xt(this.y);return t[31]|=this.x&x?128:0,t}toHex(){return St(this.toRawBytes())}toX25519(){const{y:t}=this,e=d((x+t)*Nt(x-t));return xt(e)}isTorsionFree(){return E.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new B(d(-this.x),this.y)}add(t){return E.fromAffine(this).add(E.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return E.fromAffine(this).multiply(t,this).toAffine()}}B.BASE=new B(R.Gx,R.Gy);B.ZERO=new B(U,x);class ee{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=nt(t,64),i=B.fromHex(e.slice(0,32),!1),s=ft(e.slice(32,64));return new ee(i,s)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof B))throw new Error("Expected Point instance");return Ct(e,R.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(xt(this.s),32),t}toHex(){return St(this.toRawBytes())}}function or(...r){if(!r.every(i=>i instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(r.length===1)return r[0];const t=r.reduce((i,s)=>i+s.length,0),e=new Uint8Array(t);for(let i=0,s=0;i<r.length;i++){const n=r[i];e.set(n,s),s+=n.length}return e}const ar=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function St(r){if(!(r instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=ar[r[e]];return t}function Ce(r){if(typeof r!="string")throw new TypeError("hexToBytes: expected string, got "+typeof r);if(r.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(r.length/2);for(let e=0;e<t.length;e++){const i=e*2,s=r.slice(i,i+2),n=Number.parseInt(s,16);if(Number.isNaN(n)||n<0)throw new Error("Invalid byte sequence");t[e]=n}return t}function Ie(r){const e=r.toString(16).padStart(64,"0");return Ce(e)}function xt(r){return Ie(r).reverse()}function X(r){return(d(r)&x)===x}function ft(r){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+St(Uint8Array.from(r).reverse()))}function Mt(r){return d(ft(r)&N**Oe-x)}function d(r,t=R.P){const e=r%t;return e>=U?e:t+e}function Nt(r,t=R.P){if(r===U||t<=U)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=d(r,t),i=t,s=U,n=x;for(;e!==U;){const c=i/e,l=i%e,o=s-n*c;i=e,e=l,s=n,n=o}if(i!==x)throw new Error("invert: does not exist");return d(s,t)}function cr(r,t=R.P){const e=new Array(r.length),i=r.reduce((n,a,c)=>a===U?n:(e[c]=n,d(n*a,t)),x),s=Nt(i,t);return r.reduceRight((n,a,c)=>a===U?n:(e[c]=d(n*e[c],t),d(n*a,t)),s),e}function z(r,t){const{P:e}=R;let i=r;for(;t-- >U;)i*=i,i%=e;return i}function ur(r){const{P:t}=R,e=BigInt(5),i=BigInt(10),s=BigInt(20),n=BigInt(40),a=BigInt(80),l=r*r%t*r%t,o=z(l,N)*l%t,u=z(o,x)*r%t,f=z(u,e)*u%t,p=z(f,i)*f%t,m=z(p,s)*p%t,b=z(m,n)*m%t,v=z(b,a)*b%t,S=z(v,a)*b%t,C=z(S,i)*f%t;return{pow_p_5_8:z(C,N)*r%t,b2:l}}function re(r,t){const e=d(t*t*t),i=d(e*e*t),s=ur(r*i).pow_p_5_8;let n=d(r*e*s);const a=d(t*n*n),c=n,l=d(n*mt),o=a===r,u=a===d(-r),f=a===d(-r*mt);return o&&(n=c),(u||f)&&(n=l),X(n)&&(n=d(-n)),{isValid:o||u,value:n}}function he(r){return re(x,r)}async function de(...r){const t=await Pt.sha512(or(...r)),e=ft(t);return d(e,R.l)}function lr(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function nt(r,t){const e=r instanceof Uint8Array?Uint8Array.from(r):Ce(r);if(typeof t=="number"&&e.length!==t)throw new Error(`Expected ${t} bytes`);return e}function Ct(r,t,e=!0){if(!t)throw new TypeError("Specify max value");if(typeof r=="number"&&Number.isSafeInteger(r)&&(r=BigInt(r)),typeof r=="bigint"&&r<t){if(e){if(U<r)return r}else if(U<=r)return r}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function fr(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}async function ne(r){if(r=typeof r=="bigint"||typeof r=="number"?Ie(Ct(r,ke)):nt(r),r.length!==32)throw new Error("Expected 32 bytes");const t=await Pt.sha512(r),e=fr(t.slice(0,32)),i=t.slice(32,64),s=d(ft(e),R.l),n=B.BASE.multiply(s),a=n.toRawBytes();return{head:e,prefix:i,scalar:s,point:n,pointBytes:a}}async function hr(r,t){r=nt(r);const{prefix:e,scalar:i,pointBytes:s}=await ne(t),n=await de(e,r),a=B.BASE.multiply(n),c=await de(a.toRawBytes(),s,r),l=d(n+c*i,R.l);return new ee(a,l).toRawBytes()}B.BASE._setWindowSize(8);const Z={node:er,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Pt={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:St,getExtendedPublicKey:ne,mod:d,invert:Nt,hashToPrivateScalar:r=>{if(r=nt(r),r.length<40||r.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const t=d(ft(r),R.l);if(t===U||t===x)throw new Error("Invalid private key");return t},randomBytes:(r=32)=>{if(Z.web)return Z.web.getRandomValues(new Uint8Array(r));if(Z.node){const{randomBytes:t}=Z.node;return new Uint8Array(t(r).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Pt.randomBytes(32),sha512:async r=>{if(Z.web){const t=await Z.web.subtle.digest("SHA-512",r.buffer);return new Uint8Array(t)}else{if(Z.node)return Uint8Array.from(Z.node.createHash("sha512").update(r).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(r=8,t=B.BASE){const e=t.equals(B.BASE)?t:new B(t.x,t.y);return e._setWindowSize(r),e.multiply(N),e}};var dr=function(r,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var e=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&function(n){return function(a){return function(c,l){var o={key:c,value:a[c]},u={key:l,value:a[l]};return n(o,u)}}}(t.cmp),s=[];return function n(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var c,l;if(Array.isArray(a)){for(l="[",c=0;c<a.length;c++)c&&(l+=","),l+=n(a[c])||"null";return l+"]"}if(a===null)return"null";if(s.indexOf(a)!==-1){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=s.push(a)-1,u=Object.keys(a).sort(i&&i(a));for(l="",c=0;c<u.length;c++){var f=u[c],p=n(a[f]);p&&(l&&(l+=","),l+=JSON.stringify(f)+":"+p)}return s.splice(o,1),"{"+l+"}"}}(r)},ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Et=0;Et<ut.length;Et++)vt[ut.charCodeAt(Et)]=Et;var pr=function(r){var t=new Uint8Array(r),e,i=t.length,s="";for(e=0;e<i;e+=3)s+=ut[t[e]>>2],s+=ut[(t[e]&3)<<4|t[e+1]>>4],s+=ut[(t[e+1]&15)<<2|t[e+2]>>6],s+=ut[t[e+2]&63];return i%3===2?s=s.substring(0,s.length-1)+"=":i%3===1&&(s=s.substring(0,s.length-2)+"=="),s},yr=function(r){var t=r.length*.75,e=r.length,i,s=0,n,a,c,l;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);var o=new ArrayBuffer(t),u=new Uint8Array(o);for(i=0;i<e;i+=4)n=vt[r.charCodeAt(i)],a=vt[r.charCodeAt(i+1)],c=vt[r.charCodeAt(i+2)],l=vt[r.charCodeAt(i+3)],u[s++]=n<<2|a>>4,u[s++]=(a&15)<<4|c>>2,u[s++]=(c&3)<<6|l&63;return o};/*! noble-hashes - MIT License (c) 2021 Paul Miller (paulmillr.com) */const Ht=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),br=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!br)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));(()=>{const r=typeof module<"u"&&typeof module.require=="function"&&module.require.bind(module);try{if(r){const{setImmediate:t}=r("timers");return()=>new Promise(e=>t(e))}}catch{}return()=>new Promise(t=>setTimeout(t,0))})();function vr(r){if(typeof r!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof r}`);return new TextEncoder().encode(r)}function Ne(r){if(typeof r=="string"&&(r=vr(r)),!(r instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof r})`);return r}class mr{clone(){return this._cloneInto()}}function ie(r){const t=i=>r().update(Ne(i)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t.init=t.create,t}function gr(r,t,e,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,i);const s=BigInt(32),n=BigInt(4294967295),a=Number(e>>s&n),c=Number(e&n),l=i?4:0,o=i?0:4;r.setUint32(t+l,a,i),r.setUint32(t+o,c,i)}class wr extends mr{constructor(t,e,i,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ht(this.buffer)}update(t){if(this.destroyed)throw new Error("instance is destroyed");const{view:e,buffer:i,blockLen:s,finished:n}=this;if(n)throw new Error("digest() was already called");t=Ne(t);const a=t.length;for(let c=0;c<a;){const l=Math.min(s-this.pos,a-c);if(l===s){const o=Ht(t);for(;s<=a-c;c+=s)this.process(o,c);continue}i.set(t.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length<this.outputLen)throw new Error("_Sha2: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0;const{buffer:e,view:i,blockLen:s,isLE:n}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(i,0),a=0);for(let l=a;l<s;l++)e[l]=0;gr(i,s-8,BigInt(this.length*8),n),this.process(i,0);const c=Ht(t);this.get().forEach((l,o)=>c.setUint32(4*o,l,n))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:i,length:s,finished:n,destroyed:a,pos:c}=this;return t.length=s,t.pos=c,t.finished=n,t.destroyed=a,s%e&&t.buffer.set(i),t}}const _t=BigInt(2**32-1),pe=BigInt(32);function xr(r,t=!1){return t?{h:Number(r&_t),l:Number(r>>pe&_t)}:{h:Number(r>>pe&_t)|0,l:Number(r&_t)|0}}function Sr(r,t=!1){let e=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:n,l:a}=xr(r[s],t);[e[s],i[s]]=[n,a]}return[e,i]}const ye=(r,t,e)=>r>>>e,be=(r,t,e)=>r<<32-e|t>>>e,at=(r,t,e)=>r>>>e|t<<32-e,ct=(r,t,e)=>r<<32-e|t>>>e,Rt=(r,t,e)=>r<<64-e|t>>>e-32,Tt=(r,t,e)=>r>>>e-32|t<<64-e;function q(r,t,e,i){const s=(t>>>0)+(i>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Ar=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Er=(r,t,e,i)=>t+e+i+(r/2**32|0)|0,_r=(r,t,e,i)=>(r>>>0)+(t>>>0)+(e>>>0)+(i>>>0),Rr=(r,t,e,i,s)=>t+e+i+s+(r/2**32|0)|0,Tr=(r,t,e,i,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(i>>>0)+(s>>>0),Br=(r,t,e,i,s,n)=>t+e+i+s+n+(r/2**32|0)|0,[Ur,Or]=Sr(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),$=new Uint32Array(80),J=new Uint32Array(80);class se extends wr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:i,Bl:s,Ch:n,Cl:a,Dh:c,Dl:l,Eh:o,El:u,Fh:f,Fl:p,Gh:m,Gl:b,Hh:v,Hl:S}=this;return[t,e,i,s,n,a,c,l,o,u,f,p,m,b,v,S]}set(t,e,i,s,n,a,c,l,o,u,f,p,m,b,v,S){this.Ah=t|0,this.Al=e|0,this.Bh=i|0,this.Bl=s|0,this.Ch=n|0,this.Cl=a|0,this.Dh=c|0,this.Dl=l|0,this.Eh=o|0,this.El=u|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=b|0,this.Hh=v|0,this.Hl=S|0}process(t,e){for(let A=0;A<16;A++,e+=4)$[A]=t.getUint32(e),J[A]=t.getUint32(e+=4);for(let A=16;A<80;A++){const L=$[A-15]|0,M=J[A-15]|0,ht=at(L,M,1)^at(L,M,8)^ye(L,M,7),dt=ct(L,M,1)^ct(L,M,8)^be(L,M,7),O=$[A-2]|0,F=J[A-2]|0,it=at(O,F,19)^Rt(O,F,61)^ye(O,F,6),P=ct(O,F,19)^Tt(O,F,61)^be(O,F,6),st=_r(dt,P,J[A-7],J[A-16]),Q=Rr(st,ht,it,$[A-7],$[A-16]);$[A]=Q|0,J[A]=st|0}let{Ah:i,Al:s,Bh:n,Bl:a,Ch:c,Cl:l,Dh:o,Dl:u,Eh:f,El:p,Fh:m,Fl:b,Gh:v,Gl:S,Hh:C,Hl:D}=this;for(let A=0;A<80;A++){const L=at(f,p,14)^at(f,p,18)^Rt(f,p,41),M=ct(f,p,14)^ct(f,p,18)^Tt(f,p,41),ht=f&m^~f&v,dt=p&b^~p&S,O=Tr(D,M,dt,Or[A],J[A]),F=Br(O,C,L,ht,Ur[A],$[A]),it=O|0,P=at(i,s,28)^Rt(i,s,34)^Rt(i,s,39),st=ct(i,s,28)^Tt(i,s,34)^Tt(i,s,39),Q=i&n^i&c^n&c,h=s&a^s&l^a&l;C=v|0,D=S|0,v=m|0,S=b|0,m=f|0,b=p|0,{h:f,l:p}=q(o|0,u|0,F|0,it|0),o=c|0,u=l|0,c=n|0,l=a|0,n=i|0,a=s|0;const y=Ar(it,st,h);i=Er(y,F,P,Q),s=y|0}({h:i,l:s}=q(this.Ah|0,this.Al|0,i|0,s|0)),{h:n,l:a}=q(this.Bh|0,this.Bl|0,n|0,a|0),{h:c,l}=q(this.Ch|0,this.Cl|0,c|0,l|0),{h:o,l:u}=q(this.Dh|0,this.Dl|0,o|0,u|0),{h:f,l:p}=q(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:b}=q(this.Fh|0,this.Fl|0,m|0,b|0),{h:v,l:S}=q(this.Gh|0,this.Gl|0,v|0,S|0),{h:C,l:D}=q(this.Hh|0,this.Hl|0,C|0,D|0),this.set(i,s,n,a,c,l,o,u,f,p,m,b,v,S,C,D)}roundClean(){$.fill(0),J.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class kr extends se{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Cr extends se{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Ir=ie(()=>new se);ie(()=>new kr);ie(()=>new Cr);var tt=globalThis&&globalThis.__assign||function(){return tt=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},tt.apply(this,arguments)},Kt=globalThis&&globalThis.__awaiter||function(r,t,e,i){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function c(u){try{o(i.next(u))}catch(f){a(f)}}function l(u){try{o(i.throw(u))}catch(f){a(f)}}function o(u){u.done?n(u.value):s(u.value).then(c,l)}o((i=i.apply(r,t||[])).next())})},Yt=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=o[0]&2?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,s=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(r,e)}catch(u){o=[6,u],s=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Nr=globalThis&&globalThis.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pr=globalThis&&globalThis.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),s,n=[],a;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return n};Pt.sha512=function(r){return Promise.resolve(Ir(r))};function oe(){return Math.round(new Date().getTime())}var Ft=function(){function r(t,e){e===void 0&&(e={});var i,s,n;this._subject=tr(t),this._set=(i=e.set)!==null&&i!==void 0?i:new Map,this._push=(s=e.push)!==null&&s!==void 0?s:new Map,this._remove=(n=e.remove)!==null&&n!==void 0?n:new Set,this._destroy=e.destroy,this._previousCommit=e.previousCommit}return Object.defineProperty(r.prototype,"subject",{get:function(){return this._subject},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"set",{get:function(){return this._set},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"push",{get:function(){return this._push},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"remove",{get:function(){return this._remove},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"destroy",{get:function(){return this._destroy},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"previousCommit",{get:function(){return this._previousCommit},enumerable:!1,configurable:!0}),r.prototype.addSetAction=function(t,e){return this.removeRemoveAction(t),this._set.set(t,e),this},r.prototype.addPushAction=function(t){for(var e,i,s,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var c=(s=this._push.get(t))!==null&&s!==void 0?s:new Set;try{for(var l=Nr(n),o=l.next();!o.done;o=l.next()){var u=o.value;c.add(u)}}catch(f){e={error:f}}finally{try{o&&!o.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}return this._push.set(t,c),this},r.prototype.addRemoveAction=function(t){return this._set.delete(t),this._push.delete(t),this._remove.add(t),this},r.prototype.removeRemoveAction=function(t){return this._remove.delete(t),this},r.prototype.setDestroy=function(t){return this._destroy=t,this},r.prototype.setPreviousCommit=function(t){return this._previousCommit=t,this},r.prototype.setSubject=function(t){return this._subject=t,this},r.prototype.sign=function(t,e){return Kt(this,void 0,void 0,function(){var i;return Yt(this,function(s){switch(s.label){case 0:return[4,this.signAt(e,t,oe())];case 1:return i=s.sent(),[2,i]}})})},r.prototype.hasUnsavedChanges=function(){return this.set.size>0||this.push.size>0||this.destroy||this.remove.size>0},r.prototype.clone=function(){var t={set:this.set,push:this.push,remove:this.remove,destroy:this.destroy,previousCommit:this.previousCommit};return new r(this.subject,structuredClone(t))},r.prototype.toPlainObject=function(){return{subject:this.subject,set:Object.fromEntries(this.set.entries()),push:Object.fromEntries(Array.from(this.push.entries()).map(function(t){var e=Pr(t,2),i=e[0],s=e[1];return[i,Array.from(s)]})),remove:Array.from(this.remove),destroy:this.destroy,previousCommit:this.previousCommit}},r.prototype.signAt=function(t,e,i){return Kt(this,void 0,void 0,function(){var s,n,a,c;return Yt(this,function(l){switch(l.label){case 0:if(t===void 0)throw new Error("No agent passed to sign commit");return s=tt(tt({},this.clone().toPlainObject()),{createdAt:i,signer:t}),n=Pe(tt({},s)),[4,je(n,e)];case 1:return a=l.sent(),c=tt(tt({},s),{signature:a}),[2,c]}})})},r}();function V(r,t,e){t in r&&t!==e&&(Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(r,t)),delete r[t])}function Pe(r){return r.remove&&Object.keys(r.remove).length===0&&delete r.remove,r.set&&Object.keys(r.set).length===0&&delete r.set,r.push&&Object.keys(r.push).length===0&&delete r.push,r.destroy===!1&&delete r.destroy,V(r,"createdAt",w.properties.commit.createdAt),V(r,"subject",w.properties.commit.subject),V(r,"set",w.properties.commit.set),V(r,"push",w.properties.commit.push),V(r,"signer",w.properties.commit.signer),V(r,"signature",w.properties.commit.signature),V(r,"remove",w.properties.commit.remove),V(r,"destroy",w.properties.commit.destroy),V(r,"previousCommit",w.properties.commit.previousCommit),r[w.properties.isA]=[w.classes.commit],dr(r)}var je=function(r,t){return Kt(void 0,void 0,void 0,function(){var e,i,s,n,a,c;return Yt(this,function(l){switch(l.label){case 0:return e=yr(t),i=new Uint8Array(e),s=new TextEncoder,n=s.encode(r),[4,hr(n,i)];case 1:return a=l.sent(),c=pr(a),[2,c]}})})};function De(r){try{var t=JSON.parse(r),e=t[w.properties.commit.subject],i=t[w.properties.commit.set],s=t[w.properties.commit.push],n=t[w.properties.commit.signer],a=t[w.properties.commit.createdAt],c=t[w.properties.commit.remove],l=t[w.properties.commit.destroy],o=t[w.properties.commit.signature],u=t["@id"],f=t[w.properties.commit.previousCommit];return{subject:e,set:i,push:s,signer:n,createdAt:a,remove:c,destroy:l,signature:o,id:u,previousCommit:f}}catch(p){throw new Error("Could not parse commit: ".concat(p))}}function jr(r,t){var e=De(r),i=e.subject,s=e.set,n=e.remove,a=e.id,c=e.destroy,l=e.signature,o=e.push,u=t.resources.get(i);if(!u)u=new rt(i);else if(u.appliedCommitSignatures.has(l))return;if(s&&Object.keys(s).forEach(function(f){var p=s[f];(p==null?void 0:p.constructor)==={}.constructor&&(p=gt(p,u,f,t)),ae(p)&&(p=p.map(function(m){return gt(m,u,f,t)})),u.setUnsafe(f,p)}),n&&n.forEach(function(f){u.removePropValLocally(f)}),o&&Object.keys(o).forEach(function(f){var p=u.get(f)||[],m=o[f],b=m.map(function(S){return gt(S,u,f,t)}),v=p.concat(b);u.setUnsafe(f,v)}),a&&u.setUnsafe(j.commit.lastCommit,a),c){t.removeResource(i);return}else u.appliedCommitSignatures.add(l),t.addResource(u)}var Dr=globalThis&&globalThis.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),W;(function(r){r.Unauthorized="Unauthorized",r.NotFound="NotFound",r.Server="Server",r.Client="Client"})(W||(W={}));function Lr(r){if(r instanceof G){if(r.type===W.Unauthorized)return!0;if(r.message.includes("Unauthorized"))return!0}return!1}var G=function(r){Dr(t,r);function t(e,i){i===void 0&&(i=W.Client);var s=r.call(this,e)||this;Object.setPrototypeOf(s,t.prototype),s.type=i,s.message=e;try{var n=JSON.parse(e),a=n[j.description];a&&(s.message=a)}catch{}return s.message||(s.message=s.createMessage()),s}return t.fromResource=function(e){var i=new t(e.get(j.description).toString());return i},t.prototype.createMessage=function(){switch(this.type){case W.Unauthorized:return"You don't have the rights to do this.";case W.NotFound:return"404 Not found.";case W.Server:return"500 Unknown server error.";default:return"Unknown error."}},t}(Error),T;(function(r){r.ATOMIC_URL="https://atomicdata.dev/datatypes/atomicURL",r.BOOLEAN="https://atomicdata.dev/datatypes/boolean",r.DATE="https://atomicdata.dev/datatypes/date",r.FLOAT="https://atomicdata.dev/datatypes/float",r.INTEGER="https://atomicdata.dev/datatypes/integer",r.MARKDOWN="https://atomicdata.dev/datatypes/markdown",r.RESOURCEARRAY="https://atomicdata.dev/datatypes/resourceArray",r.SLUG="https://atomicdata.dev/datatypes/slug",r.STRING="https://atomicdata.dev/datatypes/string",r.TIMESTAMP="https://atomicdata.dev/datatypes/timestamp",r.UNKNOWN="unknown-datatype"})(T||(T={}));var Mr=function(r){switch(r){case w.datatypes.atomicUrl:return T.ATOMIC_URL;case w.datatypes.boolean:return T.BOOLEAN;case w.datatypes.date:return T.DATE;case w.datatypes.float:return T.FLOAT;case w.datatypes.integer:return T.INTEGER;case w.datatypes.markdown:return T.MARKDOWN;case w.datatypes.resourceArray:return T.RESOURCEARRAY;case w.datatypes.slug:return T.SLUG;case w.datatypes.string:return T.STRING;case w.datatypes.timestamp:return T.TIMESTAMP;default:return T.UNKNOWN}},Hr=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,Fr=/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/,Wr=function(r,t){var e=null;if(r===void 0)throw new Error("Value is undefined, expected ".concat(t));switch(t){case T.STRING:{if(!Bt(r)){e="Not a string";break}break}case T.SLUG:{if(!Bt(r)){e="Not a slug, not even a string";break}r.match(Hr)===null&&(e="Not a valid slug. Only lowercase letters and numbers with dashes `-` between them");break}case T.ATOMIC_URL:{if(!Bt(r)){e="Not a string. Should be a URL";break}lt(r);break}case T.RESOURCEARRAY:{if(!ae(r)){e="Not an array";break}r.map(function(i,s){try{lt(i)}catch{var n=new Error("Invalid URL");throw n.index=s,n}});break}case T.INTEGER:{if(!zr(r)){e="Not a number";break}r%1!==0&&(e="Not an integer");break}case T.DATE:{if(!Bt(r)){e="Not a string";break}r.match(Fr)===null&&(e="Not a date string: YYYY-MM-DD");break}}if(e!==null)throw new Error(e)};function ae(r){return Object.prototype.toString.call(r)==="[object Array]"}function Bt(r){return typeof r=="string"}function zr(r){return typeof r=="number"}globalThis&&globalThis.__values;function ce(r,t,e){try{var i=function(n){if(n==="@id"){var a=r["@id"];if(typeof a!="string")throw new Error("'@id' field must be a string");if(t.getSubject()!=="undefined"&&t.getSubject()!==et&&a!==t.getSubject())throw new Error("Resource has wrong subject in @id. Received subject was ".concat(a,", expected ").concat(t.getSubject(),"."));return t.setSubject(a),"continue"}var c=r[n];try{if(ae(c)){var l=c.map(function(f){return gt(f,t,n,e)});t.setUnsafe(n,l)}else if(typeof c=="string")t.setUnsafe(n,c);else if(typeof c=="number")t.setUnsafe(n,c);else if(typeof c=="boolean")t.setUnsafe(n,c);else{var a=gt(c,t,n,e);t.setUnsafe(n,a)}}catch(f){var o="Failed creating value ".concat(c," for key ").concat(n," in resource ").concat(t.getSubject()),u="".concat(o,". ").concat(f.message);throw new Error(u)}};for(var s in r)i(s);t.loading=!1,t.getClasses().includes(w.classes.error)&&(t.error=G.fromResource(t)),e&&e.addResource(t)}catch(n){throw n.message="Failed parsing JSON "+n.message,t.setError(n),t.loading=!1,e&&e.addResource(t),n}return t}function gt(r,t,e,i){if(typeof r=="string")return r;if((r==null?void 0:r.constructor)==={}.constructor)if(Object.keys(r).includes("@id")){var s=r["@id"],n=new rt(s);return ce(r,n,i),s}else return r;throw new Error("Value ".concat(r," in ").concat(e," not a string or a nested Resource"))}var yt=globalThis&&globalThis.__awaiter||function(r,t,e,i){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function c(u){try{o(i.next(u))}catch(f){a(f)}}function l(u){try{o(i.throw(u))}catch(f){a(f)}}function o(u){u.done?n(u.value):s(u.value).then(c,l)}o((i=i.apply(r,t||[])).next())})},bt=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=o[0]&2?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,s=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(r,e)}catch(u){o=[6,u],s=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Wt=globalThis&&globalThis.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),s,n=[],a;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return n},zt=globalThis&&globalThis.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return r.concat(n||Array.prototype.slice.call(t))},et="unknown-subject",rt=function(){function r(t,e){if(typeof t!="string")throw new Error("Invalid subject given to resource, must be a string, found "+t);this.new=!!e,this.loading=!1,this.subject=t,this.propvals=new Map,this.appliedCommitSignatures=new Set,this.commitBuilder=new Ft(t)}return r.prototype.canWrite=function(t,e,i){return yt(this,void 0,void 0,function(){var s,n,a;return bt(this,function(c){switch(c.label){case 0:return s=this.get(j.write),e?s&&qt(s).includes(e)?[2,[!0,void 0]]:s&&qt(s).includes(Fe.publicAgent)?[2,[!0,void 0]]:(n=this.get(j.parent),n?n===e?[2,[!0,void 0]]:i===n?(console.warn("Circular parent",i),[2,[!0,"Circular parent in ".concat(this.getSubject())]]):[4,t.getResourceAsync(n)]:[2,[!1,"No write right or parent in ".concat(this.getSubject())]]):[2,[!1,"No agent given"]];case 1:return a=c.sent(),[4,a.canWrite(t,e,this.getSubject())];case 2:return[2,c.sent()]}})})},r.prototype.clone=function(){var t=new r(this.subject);return t.propvals=this.propvals,t.destroy=this.destroy,t.loading=this.loading,t.new=this.new,t.error=this.error,t.commitError=this.commitError,t.commitBuilder=this.commitBuilder.clone(),t.appliedCommitSignatures=this.appliedCommitSignatures,t},r.prototype.isReady=function(){return!this.loading&&this.error===void 0},r.prototype.get=function(t){return this.propvals.get(t)},r.prototype.getSubjects=function(t){return this.getArray(t).map(function(e){return typeof e=="string"?e:e["@id"]})},r.prototype.getArray=function(t){var e,i=(e=this.propvals.get(t))!==null&&e!==void 0?e:[];return qt(i)},r.prototype.getClasses=function(){return this.getSubjects(j.isA)},r.prototype.getCommitBuilder=function(){return this.commitBuilder},r.prototype.getSubject=function(){return this.subject},r.prototype.getSubjectNoParams=function(){var t=new URL(this.subject);return t.origin+t.pathname},r.prototype.getPropVals=function(){return this.propvals},r.prototype.getRights=function(t){return yt(this,void 0,void 0,function(){var e,i,s,n,a,c,l=this;return bt(this,function(o){switch(o.label){case 0:return e=[],i=this.getSubjects(j.write),i.forEach(function(u){e.push({for:u,type:It.WRITE,setIn:l.subject})}),s=this.getSubjects(j.read),s.forEach(function(u){e.push({for:u,type:It.READ,setIn:l.subject})}),n=this.get(j.parent),n?n===this.getSubject()?(console.warn("Circular parent",n),[2,e]):[4,t.getResourceAsync(n)]:[3,3];case 1:return a=o.sent(),[4,a.getRights(t)];case 2:c=o.sent(),e.push.apply(e,zt([],Wt(c),!1)),o.label=3;case 3:return[2,e]}})})},r.prototype.isUnauthorized=function(){return!!this.error&&Lr(this.error)},r.prototype.destroy=function(t,e){return yt(this,void 0,void 0,function(){var i,s,n;return bt(this,function(a){switch(a.label){case 0:if(i=new Ft(this.getSubject()),i.setDestroy(!0),e===void 0&&(e=t.getAgent()),(e==null?void 0:e.subject)===void 0)throw new Error("No agent has been set or passed, you cannot delete this.");return[4,i.sign(e.privateKey,e.subject)];case 1:return s=a.sent(),n=new URL(this.getSubject()).origin+"/commit",[4,ue(s,n)];case 2:return a.sent(),t.removeResource(this.getSubject()),[2]}})})},r.prototype.pushPropVal=function(t){for(var e,i,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];var a=(i=this.get(t))!==null&&i!==void 0?i:[];a.push.apply(a,zt([],Wt(s),!1)),(e=this.commitBuilder).addPushAction.apply(e,zt([t],Wt(s),!1)),this.propvals.set(t,a)},r.prototype.removePropVal=function(t){this.propvals.delete(t),this.commitBuilder.addRemoveAction(t)},r.prototype.removePropValLocally=function(t){this.propvals.delete(t)},r.prototype.save=function(t,e){var i,s,n;return yt(this,void 0,void 0,function(){var a,c,l,o,u,f,p,m,b;return bt(this,function(v){switch(v.label){case 0:if(t.addResource(this),a=(i=t.getAgent())!==null&&i!==void 0?i:e,!a)throw new Error("No agent has been set or passed, you cannot save.");return c=(s=this.get(j.commit.lastCommit))===null||s===void 0?void 0:s.toString(),c&&this.commitBuilder.setPreviousCommit(c),l=this.commitBuilder.clone(),this.commitBuilder=new Ft(this.getSubject()),[4,l.sign(a.privateKey,a.subject)];case 1:o=v.sent(),this.appliedCommitSignatures.add(o.signature),this.loading=!1,this.new=!1,u=new URL(this.getSubject()).origin+"/commit",v.label=2;case 2:return v.trys.push([2,4,,8]),this.commitError=void 0,[4,ue(o,u)];case 3:return f=v.sent(),this.setUnsafe(j.commit.lastCommit,f.id),t.subscribeWebSocket(this.subject),t.notifyResourceSaved(this),[2,f.id];case 4:return p=v.sent(),p.message.includes("previousCommit")?(console.warn("previousCommit missing or mismatch, retrying..."),[4,$t(this.getSubject(),t)]):[3,7];case 5:return m=v.sent(),b=(n=m.get(j.commit.lastCommit))===null||n===void 0?void 0:n.toString(),b&&this.setUnsafe(j.commit.lastCommit,b),[4,this.save(t,a)];case 6:return[2,v.sent()];case 7:throw this.commitBuilder=l,this.commitError=p,t.addResource(this),p;case 8:return[2]}})})},r.prototype.set=function(t,e,i,s){return s===void 0&&(s=!0),yt(this,void 0,void 0,function(){var n;return bt(this,function(a){switch(a.label){case 0:return i.isOffline()&&(console.warn("Offline, not validating"),s=!1),s?[4,i.getProperty(t)]:[3,2];case 1:n=a.sent(),Wr(e,n.datatype),a.label=2;case 2:return this.propvals.set(t,e),this.commitBuilder.addSetAction(t,e),[2]}})})},r.prototype.setUnsafe=function(t,e){this.propvals.set(t,e)},r.prototype.setError=function(t){this.error=t},r.prototype.setSubject=function(t){lt(t),this.commitBuilder.setSubject(t),this.subject=t},r}(),It;(function(r){r.READ="read",r.WRITE="write"})(It||(It={}));var ve=globalThis&&globalThis.__awaiter||function(r,t,e,i){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function c(u){try{o(i.next(u))}catch(f){a(f)}}function l(u){try{o(i.throw(u))}catch(f){a(f)}}function o(u){u.done?n(u.value):s(u.value).then(c,l)}o((i=i.apply(r,t||[])).next())})},me=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=o[0]&2?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,s=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(r,e)}catch(u){o=[6,u],s=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ge=globalThis&&globalThis.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),s,n=[],a;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return n},we=globalThis&&globalThis.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return r.concat(n||Array.prototype.slice.call(t))},Gr=function(){function r(){this.subscriptions=new Map}return r.prototype.register=function(t,e){var i,s=(i=this.subscriptions.get(t))!==null&&i!==void 0?i:new Set;return s.add(e),this.subscriptions.set(t,s),function(){s.delete(e)}},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return ve(this,void 0,void 0,function(){var s,n,a=this;return me(this,function(c){switch(c.label){case 0:return this.subscriptions.has(t)?(s=this.subscriptions.get(t),n=function(l){return ve(a,void 0,void 0,function(){return me(this,function(o){return l.apply(void 0,we([],ge(e),!1)),[2]})})},s?[4,Promise.allSettled(we([],ge(s),!1).map(function(l){return n(l)}))]:[2]):[2];case 1:return c.sent(),[2]}})})},r}(),Le=globalThis&&globalThis.__awaiter||function(r,t,e,i){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function c(u){try{o(i.next(u))}catch(f){a(f)}}function l(u){try{o(i.throw(u))}catch(f){a(f)}}function o(u){u.done?n(u.value):s(u.value).then(c,l)}o((i=i.apply(r,t||[])).next())})},Me=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=o[0]&2?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,s=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(r,e)}catch(u){o=[6,u],s=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},qr=globalThis&&globalThis.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function xe(r,t){var e=new URL(r);e.protocol==="http:"?e.protocol="ws":e.protocol="wss",e.pathname="/ws";var i=new WebSocket(e.toString());return i.onopen=function(s){return Vr(t,i)},i.onmessage=function(s){return Zr(s,t)},i.onerror=$r,i}function Vr(r,t){He(t,r).then(function(){var e,i;try{for(var s=qr(r.subscribers.keys()),n=s.next();!n.done;n=s.next()){var a=n.value;r.subscribeWebSocket(a)}}catch(c){e={error:c}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}})}function Zr(r,t){if(r.data.startsWith("COMMIT ")){var e=r.data.slice(7);jr(e,t)}else if(r.data.startsWith("ERROR "))t.handleError(r.data.slice(6));else if(r.data.startsWith("RESOURCE ")){var i=r.data.slice(9),s=JSON.parse(i),n=new rt(et);ce(s,n,t)}else console.warn("Unknown websocket message:",r)}function $r(r){console.error("websocket error:",r)}function He(r,t){var e;return Le(this,void 0,void 0,function(){var i,s;return Me(this,function(n){switch(n.label){case 0:return i=t.getAgent(),i?!r.url.startsWith("ws://localhost:")&&(!((e=i==null?void 0:i.subject)===null||e===void 0)&&e.startsWith("http://localhost"))?(console.warn("Can't authenticate localhost Agent over websocket"),[2]):[4,_e(r.url,i)]:[2];case 1:return s=n.sent(),r.send("AUTHENTICATE "+JSON.stringify(s)),[2]}})})}function Jr(r,t){return Le(this,void 0,void 0,function(){return Me(this,function(e){return r.send("GET "+t),[2]})})}var K=globalThis&&globalThis.__awaiter||function(r,t,e,i){function s(n){return n instanceof e?n:new e(function(a){a(n)})}return new(e||(e=Promise))(function(n,a){function c(u){try{o(i.next(u))}catch(f){a(f)}}function l(u){try{o(i.throw(u))}catch(f){a(f)}}function o(u){u.done?n(u.value):s(u.value).then(c,l)}o((i=i.apply(r,t||[])).next())})},Y=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(o){return function(u){return l([o,u])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=o[0]&2?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,s=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){e.label=o[1];break}if(o[0]===6&&e.label<n[1]){e.label=n[1],n=o;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(o);break}n[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(r,e)}catch(u){o=[6,u],s=0}finally{i=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Gt=function(){return typeof WebSocket<"u"},wt;(function(r){r.ResourceSaved="resource-saved",r.ResourceRemoved="resource-removed",r.ResourceManuallyCreated="resource-manually-created"})(wt||(wt={}));var nn=function(){function r(t){t===void 0&&(t={}),this.eventManager=new Gr,this._resources=new Map,this.webSockets=new Map,this.subscribers=new Map,t.serverUrl&&this.setServerUrl(t.serverUrl),t.agent&&this.setAgent(t.agent),this.errorHandler=function(e){throw e}}return Object.defineProperty(r.prototype,"resources",{get:function(){return this._resources},enumerable:!1,configurable:!0}),r.prototype.addResource=function(t){if(t.get(w.properties.incomplete)){var e=this.resources.get(t.getSubject());if(e&&!e.loading)return}this.resources.set(t.getSubject(),t),this.notify(t.clone())},r.prototype.checkSubjectTaken=function(t){return K(this,void 0,void 0,function(){var e;return Y(this,function(i){switch(i.label){case 0:return[4,this.getResourceAsync(t)];case 1:return e=i.sent(),e.isReady()?[2,!0]:[2,!1]}})})},r.prototype.buildUniqueSubjectFromParts=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return K(this,void 0,void 0,function(){var i;return Y(this,function(s){return i=t.join("/"),[2,this.findAvailableSubject(i)]})})},r.prototype.createSubject=function(t){var e=this.randomPart();return t=t||"things","".concat(this.getServerUrl(),"/").concat(t,"/").concat(e)},r.prototype.fetchResource=function(t,e){if(e===void 0&&(e={}),e.setLoading){var i=new rt(t);i.loading=!0,this.addResource(i)}var s=this.getWebSocketForSubject(t);!e.noWebSocket&&Gt()&&(s==null?void 0:s.readyState)===WebSocket.OPEN?Jr(s,t):$t(t,this,e.fromProxy?this.getServerUrl():void 0)},r.prototype.getAllSubjects=function(){return Array.from(this.resources.keys())},r.prototype.getDefaultWebSocket=function(){return this.webSockets.get(this.getServerUrl())},r.prototype.getWebSocketForSubject=function(t){var e=new URL(t),i=this.webSockets.get(e.origin);if(i)return i;typeof window<"u"&&this.webSockets.set(e.origin,xe(e.origin,this))},r.prototype.getServerUrl=function(){return this.serverUrl},r.prototype.getAgent=function(){var t;return(t=this.agent)!==null&&t!==void 0?t:void 0},r.prototype.getResourceLoading=function(t,e){if(t===void 0&&(t=et),e===void 0&&(e={}),t===et||t===null){var i=new rt(et,e.newResource);return i}var s=this.resources.get(t);if(s)!e.allowIncomplete&&s.loading===!1&&s.get(w.properties.incomplete)&&(s.loading=!0,this.addResource(s),this.fetchResource(t,e));else{var i=new rt(t,e.newResource);return i.loading=!0,this.addResource(i),e.newResource||this.fetchResource(t,e),i}return s},r.prototype.getResourceAsync=function(t){return K(this,void 0,void 0,function(){var e,i;return Y(this,function(s){switch(s.label){case 0:return e=this.resources.get(t),e?[3,2]:[4,$t(t,this)];case 1:return i=s.sent(),[2,i];case 2:return[2,e]}})})},r.prototype.getProperty=function(t){var e;return K(this,void 0,void 0,function(){var i,s,n,a,c,l;return Y(this,function(o){switch(o.label){case 0:return[4,this.getResourceAsync(t)];case 1:if(i=o.sent(),i===void 0)throw Error("Property ".concat(t," is not found"));if(i.error)throw Error("Property ".concat(t," cannot be loaded: ").concat(i.error));if(s=new Kr,n=i.get(w.properties.datatype),n===void 0)throw Error("Property ".concat(t," has no datatype: ").concat(i.getPropVals()));if(a=i.get(w.properties.shortname),a===void 0)throw Error("Property ".concat(t," has no shortname: ").concat(i.getPropVals()));if(c=i.get(w.properties.description),c===void 0)throw Error("Property ".concat(t," has no description: ").concat(i.getPropVals()));return l=(e=i.get(w.properties.classType))===null||e===void 0?void 0:e.toString(),s.classType=l,s.shortname=a.toString(),s.description=c.toString(),s.datatype=Mr(n.toString()),[2,s]}})})},r.prototype.handleError=function(t){typeof t=="string"&&(t=new Error(t)),this.errorHandler(t)||console.error(t)},r.prototype.isOffline=function(){var t;return typeof window>"u"?!1:!(!((t=window==null?void 0:window.navigator)===null||t===void 0)&&t.onLine)},r.prototype.notify=function(t){return K(this,void 0,void 0,function(){var e,i,s=this;return Y(this,function(n){return e=t.getSubject(),i=this.subscribers.get(e),i===void 0?[2]:(Promise.allSettled(i.map(function(a){return K(s,void 0,void 0,function(){return Y(this,function(c){return[2,a(t)]})})})),[2])})})},r.prototype.notifyResourceSaved=function(t){this.eventManager.emit(wt.ResourceSaved,t)},r.prototype.notifyResourceManuallyCreated=function(t){this.eventManager.emit(wt.ResourceManuallyCreated,t)},r.prototype.removeResource=function(t){var e=this.resources.get(t);this.resources.delete(t),e&&this.eventManager.emit(wt.ResourceRemoved,e)},r.prototype.renameSubject=function(t,e){return K(this,void 0,void 0,function(){var i;return Y(this,function(s){switch(s.label){case 0:if(lt(e),i=this.resources.get(t),i===void 0)throw Error("Old subject does not exist in store: ".concat(t));return[4,this.checkSubjectTaken(e)];case 1:if(s.sent())throw Error("New subject name is already taken: ".concat(e));return i.setSubject(e),this.resources.set(e,i),this.removeResource(t),[2]}})})},r.prototype.setAgent=function(t){var e=this;this.agent=t,t&&(Te(this,t),this.webSockets.forEach(function(i){He(i,e)}),this.resources.forEach(function(i){i.isUnauthorized()&&e.fetchResource(i.getSubject())}))},r.prototype.setServerUrl=function(t){if(lt(t),t.substr(-1)==="/")throw Error("baseUrl should not have a trailing slash");this.serverUrl=t,Gt()&&this.openWebSocket(t)},r.prototype.openWebSocket=function(t){if(Gt()){if(this.webSockets.has(t))return;this.webSockets.set(t,xe(t,this))}else console.warn("WebSockets not supported, no window available")},r.prototype.subscribe=function(t,e){if(t===void 0)throw Error("Cannot subscribe to undefined subject");var i=this.subscribers.get(t);i===void 0&&(this.subscribeWebSocket(t),i=[]),i.push(e),this.subscribers.set(t,i)},r.prototype.subscribeWebSocket=function(t){if(t!==et)try{var e=this.getWebSocketForSubject(t);(e==null?void 0:e.readyState)===1&&(e==null||e.send("SUBSCRIBE ".concat(t)))}catch(i){console.error(i)}},r.prototype.unSubscribeWebSocket=function(t){var e;if(t!==et)try{(e=this.getDefaultWebSocket())===null||e===void 0||e.send("UNSUBSCRIBE ".concat(t))}catch(i){console.error(i)}},r.prototype.unsubscribe=function(t,e){if(t!==void 0){var i=this.subscribers.get(t);i&&(i=i==null?void 0:i.filter(function(s){return s!==e}),this.subscribers.set(t,i))}},r.prototype.on=function(t,e){return this.eventManager.register(t,e)},r.prototype.randomPart=function(){return Math.random().toString(36).substring(2)},r.prototype.findAvailableSubject=function(t,e){return e===void 0&&(e=!0),K(this,void 0,void 0,function(){var i,s,n;return Y(this,function(a){switch(a.label){case 0:return i="".concat(this.getServerUrl(),"/").concat(t),e||(s=this.randomPart(),i+="-".concat(s)),[4,this.checkSubjectTaken(i)];case 1:return n=a.sent(),n?[2,this.findAvailableSubject(t,!1)]:[2,i]}})})},r}(),Kr=function(){function r(){}return r}();function qt(r){if(r===void 0)throw new Error("Not an array: ".concat(r,", is ").concat(typeof r));if(r.constructor===Array)return r;throw new Error("Not an array: ".concat(r,", is a ").concat(typeof r))}var Yr={getAll:"https://atomicdata.dev/classes/?page_size=999",agent:"https://atomicdata.dev/classes/Agent",chatRoom:"https://atomicdata.dev/classes/ChatRoom",collection:"https://atomicdata.dev/classes/Collection",commit:"https://atomicdata.dev/classes/Commit",class:"https://atomicdata.dev/classes/Class",document:"https://atomicdata.dev/classes/Document",bookmark:"https://atomicdata.dev/class/Bookmark",elements:{paragraph:"https://atomicdata.dev/classes/elements/Paragraph"},error:"https://atomicdata.dev/classes/Error",property:"https://atomicdata.dev/classes/Property",datatype:"https://atomicdata.dev/classes/Datatype",endpoint:"https://atomicdata.dev/classes/Endpoint",drive:"https://atomicdata.dev/classes/Drive",redirect:"https://atomicdata.dev/classes/Redirect",invite:"https://atomicdata.dev/classes/Invite",file:"https://atomicdata.dev/classes/File",message:"https://atomicdata.dev/classes/Message",importer:"https://atomicdata.dev/classes/Importer",folder:"https://atomicdata.dev/classes/Folder",displayStyle:"https://atomicdata.dev/class/DisplayStyle",displayStyles:{grid:"https://atomicdata.dev/display-style/grid",list:"https://atomicdata.dev/display-style/list"}},j={getAll:"https://atomicdata.dev/properties/?page_size=999",children:"https://atomicdata.dev/properties/children",classType:"https://atomicdata.dev/properties/classtype",createdBy:"https://atomicdata.dev/properties/createdBy",datatype:"https://atomicdata.dev/properties/datatype",description:"https://atomicdata.dev/properties/description",drives:"https://atomicdata.dev/properties/drives",incomplete:"https://atomicdata.dev/properties/incomplete",isA:"https://atomicdata.dev/properties/isA",isDynamic:"https://atomicdata.dev/properties/isDynamic",name:"https://atomicdata.dev/properties/name",parent:"https://atomicdata.dev/properties/parent",paymentPointer:"https://atomicdata.dev/properties/paymentPointer",read:"https://atomicdata.dev/properties/read",recommends:"https://atomicdata.dev/properties/recommends",requires:"https://atomicdata.dev/properties/requires",shortname:"https://atomicdata.dev/properties/shortname",subResources:"https://atomicdata.dev/properties/subresources",write:"https://atomicdata.dev/properties/write",displayStyle:"https://atomicdata.dev/property/display-style",agent:{publicKey:"https://atomicdata.dev/properties/publicKey"},collection:{members:"https://atomicdata.dev/properties/collection/members",currentPage:"https://atomicdata.dev/properties/collection/currentPage",pageSize:"https://atomicdata.dev/properties/collection/pageSize",property:"https://atomicdata.dev/properties/collection/property",totalMembers:"https://atomicdata.dev/properties/collection/totalMembers",totalPages:"https://atomicdata.dev/properties/collection/totalPages",value:"https://atomicdata.dev/properties/collection/value"},commit:{subject:"https://atomicdata.dev/properties/subject",createdAt:"https://atomicdata.dev/properties/createdAt",lastCommit:"https://atomicdata.dev/properties/lastCommit",previousCommit:"https://atomicdata.dev/properties/previousCommit",signer:"https://atomicdata.dev/properties/signer",set:"https://atomicdata.dev/properties/set",push:"https://atomicdata.dev/properties/push",remove:"https://atomicdata.dev/properties/remove",destroy:"https://atomicdata.dev/properties/destroy",signature:"https://atomicdata.dev/properties/signature"},document:{elements:"https://atomicdata.dev/properties/documents/elements"},endpoint:{parameters:"https://atomicdata.dev/properties/endpoint/parameters",results:"https://atomicdata.dev/properties/endpoint/results"},search:{query:"https://atomicdata.dev/properties/search/query",limit:"https://atomicdata.dev/properties/search/limit",property:"https://atomicdata.dev/properties/search/property"},redirect:{destination:"https://atomicdata.dev/properties/destination",redirectAgent:"https://atomicdata.dev/properties/invite/redirectAgent"},invite:{agent:"https://atomicdata.dev/properties/invite/agent",publicKey:"https://atomicdata.dev/properties/invite/publicKey",target:"https://atomicdata.dev/properties/invite/target",usagesLeft:"https://atomicdata.dev/properties/invite/usagesLeft",users:"https://atomicdata.dev/properties/invite/users",write:"https://atomicdata.dev/properties/invite/write"},file:{filename:"https://atomicdata.dev/properties/filename",filesize:"https://atomicdata.dev/properties/filesize",downloadUrl:"https://atomicdata.dev/properties/downloadURL",mimetype:"https://atomicdata.dev/properties/mimetype",attachments:"https://atomicdata.dev/properties/attachments"},chatRoom:{messages:"https://atomicdata.dev/properties/messages",nextPage:"https://atomicdata.dev/properties/nextPage",replyTo:"https://atomicdata.dev/properties/replyTo"},bookmark:{url:"https://atomicdata.dev/property/url",preview:"https://atomicdata.dev/property/preview",imageUrl:"https://atomicdata.dev/properties/imageUrl"}},Xr={atomicUrl:"https://atomicdata.dev/datatypes/atomicURL",boolean:"https://atomicdata.dev/datatypes/boolean",date:"https://atomicdata.dev/datatypes/date",float:"https://atomicdata.dev/datatypes/float",integer:"https://atomicdata.dev/datatypes/integer",markdown:"https://atomicdata.dev/datatypes/markdown",resourceArray:"https://atomicdata.dev/datatypes/resourceArray",slug:"https://atomicdata.dev/datatypes/slug",string:"https://atomicdata.dev/datatypes/string",timestamp:"https://atomicdata.dev/datatypes/timestamp"},Fe={publicAgent:"https://atomicdata.dev/agents/publicAgent"},w={properties:j,classes:Yr,datatypes:Xr,instances:Fe};export{en as P,nn as S,Xt as p,rn as q,w as u,Qr as v,tn as z};
